Электронный магазин

Сервер
Для хранения текущего состояния магазина используются файлы,в которых содержатся наименования товара, цена, уникальный идентификатор и количество доступных для покупки единици товара(name.txt, price.txt, uid.txt и amount.txt)
При начале работы сервера эти данные читаются из файлов и запоминаются в программе для дальнейшей работы магазина. При подключении к серверу, пользователь проходит процедуру аутенификации, и после этого получает информацию обо всех доступных товарах. Сервер также хранит историю совершенных покупок за текущий сеанс. При перезагрузке сервера эта информация теряется. Может сам оборвать сеанс связи с клиентом. Перед выключением сервера, все изменения в базе товаров, произведенные за текущий сеанс сохраняются в файлах name.txt, price.txt, uid.txt и amount.txt.


Клиент
При подключении к серверу, клиент отправляет серверу свои данные, для того чтобы сервер мог составлять историю покупок. Клиент может посмотреть список всех доступных товаров, приобрести что-нибудь,удалить/добавить наименования или изменить имеющееся количество единиц уже существующих товаров а также оборвать сеанс связи с сервером. Функции администратора (удаление, добавление и изменение) могут быть исполнены любым пользователем.  

Команды клиента:
connect - подключение к серверу
exit - завершение сеанса обмена
buy - оформление заказа
add - добавление единиц существующего товара
remove - удаление товара из базы
create - добавление товара в базу



Пример диалога между клиентом(c) сервером(s):
c: Connecting to e-shop...
c: Connected
s: Please, enter your initials
c: Petrov Andrey
s: Welcom, Petrov Andrey! 

   This is the list of existed in our shop goods:
   Name 				Price,$
   Laptop Asus k117ln 			1200
   Laptop HP Pavilion dv6 		900
   ...
   ...
   ...
   A4 Tech X7 Gaming mouse		25

c: Buy
s: Enter selected good name
c: Laptop Asus k115ln
s: What amount of Laptop Asus k115ln you want to buy?
c: 5
s: Confirm you buying(Laptop Asus k115ln - 5) y/n?
c: y
s: Thanks for buying in our shop! Do you want to buy smth else? y/n?
c: y
s: This is the list of existed in our shop goods:
   Name 				Price,$
   Laptop Asus k117ln 			1200
   Laptop HP Pavilion dv6 		900
   ...
   ...
   ...
   A4 Tech X7 Gaming mouse		25

c: exit

Здесь приведен всего один вариант возможного развития событий. На разных этапах общения клиента с сервером могут возникнуть различные ситуации, например при покупке клиента какого-нибудь товара свыше одной единицы(если товар на складе отсутствует даже в единичном экземпляре, пользователь не увидит о нем никакой информации, сервер не покажет его в спике товаров), требуемого количества может не оказаться на складе. Тогда сервер сообщит о невозможности выполнения данной покупки и предложит сформировать заказ заново - пользователь снова попадет на этап изучения списка товаров. Когда пользователь сформирует корректный заказ, он должен его подтвердить. Если пользователь решит отказаться от покупки на этом этапе, он попадает на этап изучения списка товаров. Когда покупка успешно совершена, покупатель может снова посмотреть список товаров. Если он откажется, сервер обрывает сеанс связи с клиентом. 

